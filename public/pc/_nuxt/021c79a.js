(window.webpackJsonp=window.webpackJsonp||[]).push([[25,6,19],{418:function(t,e,o){var content=o(421);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(16).default)("03051d40",content,!0,{sourceMap:!1})},419:function(t,e,o){"use strict";o.r(e);o(415),o(69),o(259);var r={data:function(){return{priceSlice:{}}},components:{},props:{firstSize:{type:Number,default:14},secondSize:{type:Number,default:14},color:{type:String},weight:{type:[String,Number],default:500},price:{type:[String,Number],default:""},showSubscript:{type:Boolean,default:!0},subscriptSize:{type:Number,default:14},lineThrough:{type:Boolean,default:!1}},created:function(){this.priceFormat()},watch:{price:function(t){this.priceFormat()}},methods:{priceFormat:function(){var t=this.price,e={};null!==t&&(t=parseFloat(t),t=String(t).split("."),e.first=t[0],e.second=t[1],this.priceSlice=e)}}},n=(o(420),o(8)),component=Object(n.a)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("span",{class:(t.lineThrough?"line-through":"")+"price-format",style:{color:t.color,"font-weight":t.weight}},[t.showSubscript?o("span",{style:{"font-size":t.subscriptSize+"px","margin-right":"1px"}},[t._v("¥")]):t._e(),t._v(" "),o("span",{style:{"font-size":t.firstSize+"px","margin-right":"1px"}},[t._v(t._s(t.priceSlice.first))]),t._v(" "),t.priceSlice.second?o("span",{style:{"font-size":t.secondSize+"px"}},[t._v("."+t._s(t.priceSlice.second))]):t._e()])}),[],!1,null,null,null);e.default=component.exports},420:function(t,e,o){"use strict";o(418)},421:function(t,e,o){var r=o(15)(!1);r.push([t.i,".price-format{display:flex;align-items:baseline}",""]),t.exports=r},432:function(t,e,o){"use strict";var r=o(4),n=o(88).find,c=o(173),d="find",l=!0;d in[]&&Array(1).find((function(){l=!1})),r({target:"Array",proto:!0,forced:l},{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),c(d)},433:function(t,e,o){var content=o(454);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(16).default)("0290099d",content,!0,{sourceMap:!1})},437:function(t,e,o){"use strict";o.d(e,"a",(function(){return d}));var r=o(122);var n=o(176),c=o(90);function d(t){return function(t){if(Array.isArray(t))return Object(r.a)(t)}(t)||Object(n.a)(t)||Object(c.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},440:function(t,e,o){t.exports=o.p+"img/bg_coupon_s.3f57cfd.png"},452:function(t,e,o){t.exports=o.p+"img/coupons_img_receive.d691393.png"},453:function(t,e,o){"use strict";o(433)},454:function(t,e,o){var r=o(15),n=o(174),c=o(440),d=o(455),l=r(!1),v=n(c),h=n(d);l.push([t.i,".coupons-list[data-v-686d083c]{padding:0 18px;flex-wrap:wrap;position:relative}.coupons-list .item[data-v-686d083c]{margin-bottom:20px;margin-right:16px;position:relative;cursor:pointer}.coupons-list .item .info[data-v-686d083c]{padding:0 10px;background:url("+v+") no-repeat;width:240px;height:80px;background-size:100%}.coupons-list .item .info.gray[data-v-686d083c]{background-image:url("+h+")}.coupons-list .item .info .info-hd[data-v-686d083c]{overflow:hidden}.coupons-list .item .tips[data-v-686d083c]{position:relative;background-color:#f2f2f2;height:30px;padding:0 8px}.coupons-list .item .tips .tips-con[data-v-686d083c]{width:100%;left:0;background-color:#f2f2f2;position:absolute;top:30px;padding:10px;z-index:99}.coupons-list .item .receice[data-v-686d083c]{position:absolute;top:0;right:0;width:58px;height:45px}.coupons-list .item .choose[data-v-686d083c]{position:absolute;top:0;right:0;background-color:#ffe72c;color:#ff2c3c;padding:1px 5px}.coupons-list .more[data-v-686d083c]{position:absolute;bottom:20px;cursor:pointer;right:30px}",""]),t.exports=l},455:function(t,e,o){t.exports=o.p+"img/bg_coupon.b22691e.png"},456:function(t,e,o){"use strict";o.r(e);o(21),o(17),o(20),o(29),o(30);var r=o(437),n=o(6),c=o(7),d=(o(48),o(415),o(18),o(58),o(10));function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function v(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var h={props:{list:{type:Array,default:function(){return[]}},type:{type:Number},showMore:{type:Boolean,default:!1}},data:function(){return{showTips:[],couponsList:[],id:"",isMore:!1}},methods:v(v({},Object(d.b)(["getPublicData"])),{},{onHandle:function(t){switch(this.id=t,this.type){case 0:case 1:case 2:break;case 3:this.getCoupon();break;case 4:this.selectId==t&&(this.id=""),this.$emit("use",this.id),this.selectId=this.id}},getCoupon:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var o,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$post("coupon/getCoupon",{id:t.id});case 2:o=e.sent,r=o.msg,1==o.code&&(t.$message({message:r,type:"success"}),t.getPublicData(),t.$emit("reflash"));case 6:case"end":return e.stop()}}),e)})))()},onShowTips:function(t){var e=this.showTips;this.showTips[t]=e[t]?0:1,this.showTips=Object.assign([],this.showTips)},changeShow:function(){var t=this;this.isMore=!this.isMore,this.list.forEach((function(e,o){e.isShow=!0,!t.isMore&&o>=4&&(e.isShow=!1)})),this.couponsList=Object(r.a)(this.list)}}),watch:{list:{handler:function(t){var e=this;t.length&&4==this.type&&(this.id=t[0].id,this.selectId=this.id,this.$emit("use",this.id));var o=t.map((function(t){return 0}));this.showTips=o,this.list.forEach((function(t,o){t.isShow=!0,e.showMore&&o>=4&&(t.isShow=!1)})),this.couponsList=this.list},immediate:!0,deep:!0}}},f=(o(453),o(8)),component=Object(f.a)(h,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"coupons-list row"},[t._l(t.couponsList,(function(e,n){return[r("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],key:n,staticClass:"item",on:{"!click":function(o){return t.onHandle(e.id)}}},[r("div",{class:["info white",{gray:2==t.type||1==t.type||e.is_get}]},[r("div",{staticClass:"info-hd row"},[r("div",[r("price-formate",{attrs:{price:e.money,"first-size":38,"second-size":38}})],1),t._v(" "),r("div",{staticClass:"ml8 flex1"},[r("div",{staticClass:"line1"},[t._v(t._s(e.name))]),t._v(" "),r("div",{staticClass:"xs line1"},[t._v(t._s(e.use_condition))])])]),t._v(" "),r("div",{staticClass:"info-time xs"},[t._v(t._s(e.use_time_tips))])]),t._v(" "),r("div",{staticClass:"tips row-between",on:{click:function(e){return e.stopPropagation(),t.onShowTips(n)}}},[r("div",{staticClass:"muted xs"},[t._v(t._s(e.coupon_type))]),t._v(" "),e.tips?r("div",[r("i",{class:t.showTips[n]?"el-icon-arrow-up":"el-icon-arrow-down"}),t._v(" "),e.tips&&t.showTips[n]?r("div",{staticClass:"tips-con xs lighter"},[t._v("\n            "+t._s(e.tips)+"\n          ")]):t._e()]):t._e(),t._v(" "),3!=t.type||e.is_get?t._e():r("div",{staticClass:"primary sm"},[t._v("\n          立即领取\n        ")])]),t._v(" "),e.is_get?r("img",{staticClass:"receice",attrs:{src:o(452),alt:""}}):t._e(),t._v(" "),4==t.type&&t.id==e.id?r("div",{staticClass:"choose xs"},[t._v("已选择")]):t._e()])]})),t._v(" "),t.showMore&&t.list.length>4?r("div",{staticClass:"more muted",on:{click:t.changeShow}},[t._v("\n    "+t._s(t.isMore?"收起":"更多")+"\n    "),r("i",{class:t.isMore?"el-icon-arrow-up":"el-icon-arrow-down"})]):t._e()],2)}),[],!1,null,"686d083c",null);e.default=component.exports;installComponents(component,{PriceFormate:o(419).default})},458:function(t,e,o){var content=o(478);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(16).default)("118b2d8a",content,!0,{sourceMap:!1})},459:function(t,e,o){var content=o(480);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(16).default)("4b71c4bc",content,!0,{sourceMap:!1})},477:function(t,e,o){"use strict";o(458)},478:function(t,e,o){var r=o(15)(!1);r.push([t.i,'.address-list[data-v-86b28bd2]  .el-dialog__body{height:460px;overflow-y:auto}.address-list .list[data-v-86b28bd2]{margin:0 auto;width:800px}.address-list .list .item[data-v-86b28bd2]{position:relative;cursor:pointer;height:100px;padding:16px 150px 16px 20px;border:1px solid #e5e5e5;border-radius:2px}.address-list .list .item.active[data-v-86b28bd2]{border-color:#ff2c3c}.address-list .list .item.disabled[data-v-86b28bd2]:before{z-index:9;position:absolute;top:0;left:0;right:0;bottom:0;display:block;content:"";width:100%;height:100%;background-color:hsla(0,0%,100%,.5)}.address-list .list .item .oprate[data-v-86b28bd2]{position:absolute;right:20px;bottom:9px}.address-list .dialog-footer[data-v-86b28bd2]{text-align:center}.address-list .dialog-footer .el-button[data-v-86b28bd2]{width:160px}',""]),t.exports=r},479:function(t,e,o){"use strict";o(459)},480:function(t,e,o){var r=o(15)(!1);r.push([t.i,".address-list[data-v-1d5a717e]  .el-dialog__body{height:460px;overflow-y:auto}.address-list .list[data-v-1d5a717e]{margin:0 auto;width:800px}.address-list .list .item[data-v-1d5a717e]{position:relative;cursor:pointer;height:100px;padding:16px 150px 16px 20px;border:1px solid #e5e5e5;border-radius:2px}.address-list .list .item.active[data-v-1d5a717e]{border-color:#ff2c3c}.address-list .list .item .oprate[data-v-1d5a717e]{position:absolute;right:20px;bottom:9px}.address-list .dialog-footer[data-v-1d5a717e]{text-align:center}.address-list .dialog-footer .el-button[data-v-1d5a717e]{width:160px}",""]),t.exports=r},491:function(t,e,o){"use strict";o.r(e);o(432);var r={props:{value:{type:Boolean,default:!1},list:{type:Array,require:!0}},data:function(){return{showDialog:!1,selectId:""}},methods:{onConfirm:function(){var t=this.selectId,e=this.list.find((function(e){return e.id===t}));this.$emit("confirm",e),this.showDialog=!1},onSelectShop:function(t){if(!(1*t.business_status))return this.$message.error("不在营业中");this.selectId=t.id},loadShopList:function(){console.log("Loading Shopping ..."),this.$emit("load",this.selectId)}},watch:{value:function(t){this.showDialog=t},showDialog:function(t){this.$emit("input",t)},list:function(data){var t;this.selectId=null==data||null===(t=data[0])||void 0===t?void 0:t.id}}},n=(o(477),o(8)),component=Object(n.a)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"address-list"},[o("el-dialog",{attrs:{title:"更换地址",visible:t.showDialog,width:"900px"},on:{"update:visible":function(e){t.showDialog=e}}},[o("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadShopList,expression:"loadShopList"}],staticClass:"list black infinite-list",staticStyle:{overflow:"auto"}},t._l(t.list,(function(e){return o("div",{key:e.id,class:["item mb16",{active:e.id==t.selectId},{disabled:!e.business_status}],on:{click:function(o){return t.onSelectShop(e)}}},[o("div",[o("span",{staticClass:"bold"},[t._v(t._s(e.name))]),t._v(" "),o("span",{staticClass:"muted ml10"},[o("i",{staticClass:"el-icon-position"}),t._v("\n            "+t._s(e.distance)+"\n          ")])]),t._v(" "),o("div",{staticClass:"lighter mt8"},[t._v(t._s(e.shop_address))]),t._v(" "),o("div",{staticClass:"muted mt8"},[o("i",{staticClass:"el-icon-time"}),t._v(" "),o("span",[t._v(t._s(e.business_start_time+"-"+e.business_end_time))])])])})),0),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:t.onConfirm}},[t._v("确认")]),t._v(" "),o("el-button",{on:{click:function(e){t.showDialog=!1}}},[t._v("取消")])],1)])],1)}),[],!1,null,"86b28bd2",null);e.default=component.exports},493:function(t,e,o){var content=o(532);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(16).default)("c2ae23c4",content,!0,{sourceMap:!1})},523:function(t,e,o){"use strict";o.r(e);var r=o(6),n=(o(48),{components:{},props:{value:{type:Boolean,default:!1}},data:function(){return{showDialog:!1,showAddressAdd:!1,addressList:[],selectId:0,editId:""}},methods:{getAddress:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var o,code,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$get("user_address/lists");case 2:o=e.sent,code=o.code,data=o.data,1==code&&(t.addressList=data);case 6:case"end":return e.stop()}}),e)})))()},setDefault:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function o(){var r,code,n;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,e.$post("user_address/setDefault",{id:t});case 2:r=o.sent,code=r.code,r.data,n=r.msg,1==code&&(e.$message({message:n,type:"success"}),e.getAddress());case 7:case"end":return o.stop()}}),o)})))()},onConfirm:function(){this.$emit("confirm",this.selectId),this.showDialog=!1}},watch:{value:function(t){this.showDialog=t,1==t&&this.getAddress()},showDialog:function(t){this.$emit("input",t)}}}),c=(o(479),o(8)),component=Object(c.a)(n,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"address-list"},[o("el-dialog",{attrs:{title:"更换地址",visible:t.showDialog,width:"900px"},on:{"update:visible":function(e){t.showDialog=e}}},[o("div",{staticClass:"list black"},t._l(t.addressList,(function(e,r){return o("div",{key:r,class:["item mb16",{active:e.id==t.selectId}],on:{click:function(o){t.selectId=e.id}}},[o("div",[o("span",{staticClass:"bold"},[t._v(t._s(e.contact))]),t._v("\n          "+t._s(e.telephone)+"\n          "),e.is_default?o("el-tag",{attrs:{size:"mini",type:"warning",effect:"dark"}},[t._v("默认")]):t._e()],1),t._v(" "),o("div",{staticClass:"lighter mt8"},[t._v("\n          "+t._s(e.province)+" "+t._s(e.city)+" "+t._s(e.district)+"\n          "+t._s(e.address)+"\n        ")]),t._v(" "),o("div",{staticClass:"oprate lighter row"},[o("div",{staticClass:"mr16",on:{click:function(o){o.stopPropagation(),t.editId=e.id,t.showAddressAdd=!0}}},[t._v("\n            修改\n          ")]),t._v(" "),o("div",{on:{click:function(o){return o.stopPropagation(),t.setDefault(e.id)}}},[t._v("设为默认")])])])})),0),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:t.onConfirm}},[t._v("确认")]),t._v(" "),o("el-button",{on:{click:function(e){t.showDialog=!1}}},[t._v("取消")])],1)]),t._v(" "),o("address-add",{attrs:{aid:t.editId},on:{success:t.getAddress},model:{value:t.showAddressAdd,callback:function(e){t.showAddressAdd=e},expression:"showAddressAdd"}})],1)}),[],!1,null,"1d5a717e",null);e.default=component.exports;installComponents(component,{AddressAdd:o(473).default})},531:function(t,e,o){"use strict";o(493)},532:function(t,e,o){var r=o(15)(!1);r.push([t.i,'.confirm-order[data-v-36cd27b0]{padding:16px 0}.confirm-order .title[data-v-36cd27b0]{padding:12px 20px;font-weight:700}.confirm-order .title>i[data-v-36cd27b0]{cursor:pointer}.confirm-order .contact[data-v-36cd27b0]{padding:10px 20px 22px}.confirm-order .contact-item[data-v-36cd27b0]{display:flex;align-items:center;height:36px}.confirm-order .contact-item-label[data-v-36cd27b0]{width:72px;color:#888}.confirm-order .order-hd .address[data-v-36cd27b0]{padding:10px 20px 22px}.confirm-order .order-hd .address .address-con[data-v-36cd27b0]{position:relative;cursor:pointer;width:800px;height:100px;padding:16px 150px 16px 20px;border:1px solid #ff2c3c;border-radius:2px}.confirm-order .order-hd .address .address-con:hover .oprate[data-v-36cd27b0]{display:flex}.confirm-order .order-hd .address .address-con .oprate[data-v-36cd27b0]{display:none;position:absolute;right:20px;bottom:9px}.confirm-order .order-hd .address .address-add[data-v-36cd27b0]{cursor:pointer;width:320px;height:100px;border:1px dashed #e5e5e5}.confirm-order .order-con .goods[data-v-36cd27b0]{border-bottom:1px dashed #e5e5e5}.confirm-order .order-con .goods .goods-hd[data-v-36cd27b0]{height:40px;margin:0 20px}.confirm-order .order-con .goods .goods-list .item[data-v-36cd27b0]{padding:10px 20px}.confirm-order .order-con .goods .goods-list .item-disabled[data-v-36cd27b0]{position:relative}.confirm-order .order-con .goods .goods-list .item-disabled[data-v-36cd27b0]:before{z-index:9;position:absolute;top:0;left:0;bottom:0;right:0;height:100%;display:block;content:"";background-color:hsla(0,0%,100%,.5)}.confirm-order .order-con .goods .info[data-v-36cd27b0]{width:500px}.confirm-order .order-con .goods .info .pictrue[data-v-36cd27b0]{margin-right:10px}.confirm-order .order-con .goods .info .pictrue .el-image[data-v-36cd27b0]{width:72px;height:72px}.confirm-order .order-con .goods .info .name[data-v-36cd27b0]{margin-bottom:10px}.confirm-order .order-con .goods .info .delivery-support[data-v-36cd27b0]{font-size:12px;padding:4px 15px;border-radius:60px;margin-left:20px;background-color:#f4f4f4;color:#555}.confirm-order .order-con .goods .price[data-v-36cd27b0]{width:200px}.confirm-order .order-con .goods .num[data-v-36cd27b0]{width:250px}.confirm-order .order-con .goods .money[data-v-36cd27b0]{width:200px}.confirm-order .order-con .input .textarea[data-v-36cd27b0]{margin:0 20px;width:1000px}.confirm-order .order-con .integral .check-box[data-v-36cd27b0]{padding:0 20px 12px}.confirm-order .order-footer[data-v-36cd27b0]{margin-top:2px;padding:25px 20px;justify-content:flex-end}.confirm-order .order-footer .money>div[data-v-36cd27b0]{text-align:right}.confirm-order .order-footer .money>div[data-v-36cd27b0]:first-of-type{width:80px;margin-right:50px}.confirm-order .order-footer .money>div[data-v-36cd27b0]:last-of-type{flex:1}.confirm-order .order-footer .btn[data-v-36cd27b0]{width:152px;height:44px;margin-top:18px;border-radius:2px;cursor:pointer}',""]),t.exports=r},613:function(t,e,o){"use strict";o.r(e);o(21),o(17),o(20),o(29),o(18),o(30);var r=o(437),n=o(7),c=o(6),d=(o(48),o(19),o(89),o(415),o(69),o(86),o(10)),l=o(104);o(83);function v(t,e){var script=document.createElement("script");script.src="https://api.map.baidu.com/api?v=2.0&ak=".concat(e,"&callback=").concat(t),document.body.appendChild(script)}function h(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m={head:function(){return{title:this.$store.getters.headTitle,link:[{rel:"icon",type:"image/x-icon",href:this.$store.getters.favicon}]}},components:{SelffetchShopList:o(491).default},asyncData:function(t){return Object(c.a)(regeneratorRuntime.mark((function e(){var o,r,n,d,h,f,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.query,r=t.$post,n=t.$get,d=JSON.parse(decodeURIComponent(o.data)),h=d.goods,f={},m=function(t){return new Promise((function(e,o){window.initBaiduMapScript=function(){try{(new BMap.Geolocation).getCurrentPosition((function(t){if(this.getStatus()==BMAP_STATUS_SUCCESS){var o=t.point,r=o.lat,n=void 0===r?null:r,c=o.lng,d=void 0===c?null:c;console.log(n,d),e({lat:n,lng:d})}}))}catch(t){o(t)}},v("initBaiduMapScript",t)}))},e.next=6,n("order/getDeliveryType").then((function(t){var code=t.code,data=t.data,e=t.msg;if(1!=code)throw new Error(e);return data})).then((function(data){var t=[];return data.is_express&&t.push({id:1,sign:"express",name:"快递发货"}),data.is_selffetch&&t.push({id:2,sign:"store",name:"上门自提"}),f.deliveries=t,f.delivery=t[0].id,t})).then(function(){var t=Object(c.a)(regeneratorRuntime.mark((function t(data){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r("order/buy",{action:"info",goods:h,delivery_type:data[0].id}).then((function(t){var code=t.code,data=t.data,e=t.msg;if(1!=code)throw new Error(e);return data})).then((function(data){f.orderInfo=data,f.address=null==data?void 0:data.address})).catch((function(t){throw new Error(t)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then(Object(c.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r("coupon/orderCoupon",{goods:h}).then((function(t){var code=t.code,data=t.data,e=t.msg;if(1!=code)throw new Error(e);return data})).then((function(data){f.coupon=data})).catch((function(t){throw new Error(t)}));case 2:case"end":return t.stop()}}),t)})))).then(Object(c.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n("selffetch_shop/getBaiduMapKey").then((function(t){var code=t.code,data=t.data,e=t.msg;if(1!=code)throw new Error(e);return data.baidu_map_key})).then(function(){var t=Object(c.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m().then((function(t){var e=t.lat,o=t.lng;f.lat=e,f.lng=o})).catch((function(t){throw new Error(t)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){l.Message.error("定位获取失败"),console.log(t)}));case 2:case"end":return t.stop()}}),t)})))).catch((function(t){l.Message.error("数据请求失败，请稍后重试"),console.log(t)}));case 6:return e.abrupt("return",f);case 7:case"end":return e.stop()}}),e)})))()},data:function(){return{orderInfo:{},address:{},coupon:{usable:[],unusable:[]},active:0,userRemark:"",showAddress:!1,showAddressAdd:!1,addressId:"",editId:"",isEdit:!1,useIntegral:0,selffetchShop:[],checkedSelffetchShop:{},showSelffetch:!1,selffetchShopID:"",contactName:"",contactPhone:"",contactNameValue:"",contactPhoneValue:"",contactNameEdit:!1,contactPhoneEdit:!1,shopPage:1}},methods:f(f({},Object(d.b)(["getPublicData"])),{},{useCoupon:function(t){this.couponId=t,this.orderBuy()},changeContactName:function(){this.contactNameEdit=!1,this.contactNameValue=this.contactName},changeContactPhone:function(){this.contactPhoneEdit=!1,this.contactPhoneValue=this.contactPhone},closeContactNameEdit:function(){this.contactNameEdit=!1,this.contactName=this.contactNameValue},closeContactPhoneEdit:function(){this.contactPhoneEdit=!1,this.contactPhone=this.contactPhoneValue},getShopList:function(){var t=this;this.shopPage&&this.$get("selffetch_shop/lists",{params:{longitude:this.lng,latitude:this.lat,page_no:this.shopPage,page_size:10}}).then((function(e){var code=e.code,data=e.data,o=e.msg;if(1!=code)throw new Error(o);return data.more?t.shopPage+=1:t.shopPage=0,data})).then((function(e){var o=e.list;t.selffetchShop=[].concat(Object(r.a)(t.selffetchShop),Object(r.a)(o))}))},editAddress:function(t){this.editId=t,this.showAddressAdd=!0},changeAddress:function(t){this.addressId=t,this.orderBuy()},changeSelffetch:function(t){this.checkedSelffetchShop=t,this.selffetchShopID=t.id,this.orderBuy()},changeIntegral:function(){this.orderBuy()},showTipsDialog:function(){var t=this.orderInfo,e=t.integral_config,o=t.integral_limit;this.$alert("·1积分可抵扣".concat(e,"元\n·单次扣减积分不能低于").concat(o,"积分"),{confirmButtonText:"确定",title:"积分使用说明"})},submitOrder:function(){this.orderBuy("submit")},orderBuy:function(){var t=arguments,e=this;return Object(c.a)(regeneratorRuntime.mark((function o(){var r,n,c,data,address;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r=t.length>0&&void 0!==t[0]?t[0]:"info",n={action:r,delivery_type:e.delivery,goods:e.goods,use_integral:Number(e.useIntegral),address_id:e.addressId,coupon_id:e.couponId},"submit"==r&&(n.remark=e.userRemark,n.type=e.type,2===n.delivery_type&&(n.selffetch_shop_id=e.selffetchShopID,n.consignee=e.contactNameValue,n.mobile=e.contactPhoneValue,delete n.address_id)),o.next=5,e.$post("order/buy",n);case 5:c=o.sent,data=c.data,1==c.code&&("info"==r?(address=data.address,e.orderInfo=data,e.address=address):"submit"==r&&(e.getPublicData(),e.$router.replace({path:"/payment",query:{id:data.order_id}})));case 9:case"end":return o.stop()}}),o)})))()}}),watch:{contactNameValue:function(t){this.contactName=t},contactPhoneValue:function(t){this.contactPhone=t}},created:function(){var t,e,o,r,n,c,d=JSON.parse(decodeURIComponent(this.$route.query.data)),l=d.goods,v=d.type;this.goods=l,this.type=v,this.contactNameValue=null!==(t=null===(e=this.orderInfo)||void 0===e||null===(o=e.address)||void 0===o?void 0:o.contact)&&void 0!==t?t:"",this.contactPhoneValue=null!==(r=null===(n=this.orderInfo)||void 0===n||null===(c=n.address)||void 0===c?void 0:c.telephone)&&void 0!==r?r:""}},_=(o(531),o(8)),component=Object(_.a)(m,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"confirm-order"},[o("div",{staticClass:"order-hd bg-white mb16"},[o("div",{directives:[{name:"show",rawName:"v-show",value:1===t.delivery,expression:"delivery === 1"}]},[o("div",{staticClass:"title lg"},[t._v("收货地址")]),t._v(" "),o("div",{staticClass:"address row-between"},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.address.contact,expression:"address.contact"}],staticClass:"address-con"},[o("div",[o("span",{staticClass:"bold"},[t._v(t._s(t.address.contact))]),t._v("\n                        "+t._s(t.address.telephone)+"\n                        "),t.address.is_default?o("el-tag",{attrs:{size:"mini",type:"warning",effect:"dark"}},[t._v("默认")]):t._e()],1),t._v(" "),o("div",{staticClass:"lighter mt8"},[t._v("\n                        "+t._s(t.address.province)+" "+t._s(t.address.city)+" "+t._s(t.address.district)+"\n                        "+t._s(t.address.address)+"\n                    ")]),t._v(" "),o("div",{staticClass:"oprate primary row"},[o("div",{staticClass:"mr16",on:{click:function(e){return t.editAddress(t.address.id)}}},[t._v("修改")]),t._v(" "),o("div",{on:{click:function(e){t.showAddress=!0}}},[t._v("更换地址")])])]),t._v(" "),o("div",{staticClass:"address-add row-center",on:{click:function(e){return t.editAddress("")}}},[t._v("\n                    + 添加地址\n                ")])])]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:2===t.delivery,expression:"delivery === 2"}]},[o("div",{staticClass:"title lg"},[t._v("自提门店")]),t._v(" "),o("div",{staticClass:"address row-between"},[t.selffetchShopID?o("div",{staticClass:"address-con"},[o("div",[o("span",{staticClass:"bold"},[t._v(t._s(t.checkedSelffetchShop.name))]),t._v(" "),o("span",{staticClass:"muted ml10"},[o("i",{staticClass:"el-icon-position"}),t._v("\n                            "+t._s(t.checkedSelffetchShop.distance)+"\n                        ")])]),t._v(" "),o("div",{staticClass:"lighter mt8"},[t._v("\n                        "+t._s(t.checkedSelffetchShop.shop_address)+"\n                    ")]),t._v(" "),o("div",{staticClass:"muted mt8"},[o("i",{staticClass:"el-icon-time"}),t._v(" "),o("span",[t._v(t._s(t.checkedSelffetchShop.business_start_time+"-"+t.checkedSelffetchShop.business_end_time))])]),t._v(" "),o("div",{staticClass:"oprate primary row"},[o("div",{on:{click:function(e){t.showSelffetch=!0}}},[t._v("更换门店")])])]):o("div",{staticClass:"address-add row-center",on:{click:function(e){t.showSelffetch=!0}}},[t._v("\n                    + 请选择门店\n                ")])])]),t._v(" "),o("div",{staticClass:"title lg"},[t._v("配送方式")]),t._v(" "),o("div",{staticClass:"address row-between"},[o("el-radio-group",{model:{value:t.delivery,callback:function(e){t.delivery=e},expression:"delivery"}},t._l(t.deliveries,(function(e){return o("el-radio",{key:e.id,attrs:{label:e.id}},[t._v(t._s(e.name))])})),1)],1)]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:2===t.delivery,expression:"delivery === 2"}],staticClass:"bg-white mb16"},[o("div",{staticClass:"title lg"},[t._v("提货人信息")]),t._v(" "),o("div",{staticClass:"contact"},[o("div",{staticClass:"contact-item"},[o("div",{staticClass:"contact-item-label"},[t._v("提货人")]),t._v(" "),o("div",{staticClass:"contact-item-content"},[o("div",{directives:[{name:"show",rawName:"v-show",value:!t.contactNameEdit,expression:"!contactNameEdit"}]},[o("span",{staticClass:"mr10 black"},[t._v(t._s(t.contactNameValue))]),t._v(" "),o("span",{staticClass:"primary pointer",on:{click:function(e){t.contactNameEdit=!0}}},[t._v("修改")])]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.contactNameEdit,expression:"contactNameEdit"}],staticClass:"row"},[o("el-input",{staticClass:"mr10",attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.contactName,callback:function(e){t.contactName=e},expression:"contactName"}}),t._v(" "),o("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.changeContactName}},[t._v("确认")]),t._v(" "),o("el-button",{attrs:{size:"small"},on:{click:t.closeContactNameEdit}},[t._v("取消")])],1)])]),t._v(" "),o("div",{staticClass:"contact-item"},[o("div",{staticClass:"contact-item-label"},[t._v("联系方式")]),t._v(" "),o("div",{staticClass:"contact-item-content"},[o("div",{directives:[{name:"show",rawName:"v-show",value:!t.contactPhoneEdit,expression:"!contactPhoneEdit"}]},[o("span",{staticClass:"mr10 black"},[t._v(t._s(t.contactPhoneValue))]),t._v(" "),o("span",{staticClass:"primary pointer",on:{click:function(e){t.contactPhoneEdit=!0}}},[t._v("修改")])]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.contactPhoneEdit,expression:"contactPhoneEdit"}],staticClass:"row"},[o("el-input",{staticClass:"mr10",attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.contactPhone,callback:function(e){t.contactPhone=e},expression:"contactPhone"}}),t._v(" "),o("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.changeContactPhone}},[t._v("确认")]),t._v(" "),o("el-button",{attrs:{size:"small"},on:{click:t.closeContactPhoneEdit}},[t._v("取消")])],1)])])])]),t._v(" "),o("div",{staticClass:"order-con bg-white"},[o("div",{staticClass:"goods mb16"},[o("div",{staticClass:"title lg"},[t._v("商品信息")]),t._v(" "),t._m(0),t._v(" "),o("div",{staticClass:"goods-list"},t._l(t.orderInfo.goods_lists,(function(e,r){return o("div",{key:r,class:["row","item",{"item-disabled":1===t.delivery?!e.is_express:!e.is_selffetch}]},[o("div",{staticClass:"info row"},[o("div",{staticClass:"pictrue flexnone"},[o("el-image",{attrs:{src:e.image_str}})],1),t._v(" "),o("div",[o("div",{staticClass:"name line2"},[e.is_seckill?o("el-tag",{attrs:{size:"mini",effect:"plain"}},[t._v("秒杀")]):t._e(),t._v("\n                                "+t._s(e.goods_name)+"\n                            ")],1),t._v(" "),o("div",{staticClass:"muted"},[o("span",[t._v(t._s(e.spec_value_str))]),t._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:2===t.delivery&&!e.is_selffetch,expression:"delivery === 2 && !item.is_selffetch"}],staticClass:"delivery-support"},[t._v("该商品不支持门店自提")]),t._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:1===t.delivery&&!e.is_express,expression:"delivery === 1 && !item.is_express"}],staticClass:"delivery-support"},[t._v("该商品不支持快递配送")])])])]),t._v(" "),o("div",{staticClass:"price row-center"},[o("price-formate",{attrs:{price:e.goods_price}})],1),t._v(" "),o("div",{staticClass:"num row-center"},[t._v("\n                        "+t._s(e.goods_num)+"\n                    ")]),t._v(" "),o("div",{staticClass:"money row-center"},[o("price-formate",{attrs:{price:e.sub_price}})],1)])})),0)]),t._v(" "),o("div",{staticClass:"input",staticStyle:{"padding-bottom":"16px"}},[o("div",{staticClass:"title"},[t._v("买家留言")]),t._v(" "),o("div",{staticClass:"textarea"},[o("el-input",{attrs:{type:"textarea",placeholder:"选填，给商家备注留言，100字以内",maxlength:"100",rows:3,"show-word-limit":"",resize:"none"},model:{value:t.userRemark,callback:function(e){t.userRemark=e},expression:"userRemark"}})],1)]),t._v(" "),0==t.orderInfo.order_type?o("div",{staticClass:"coupons"},[o("el-tabs",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[o("el-tab-pane",{attrs:{label:"可用优惠券("+t.coupon.usable.length+")"}},[t.coupon.usable.length?o("div",{staticClass:"coupons-con"},[o("coupons-list",{attrs:{list:t.coupon.usable,"show-more":!0,type:4},on:{use:t.useCoupon}})],1):o("div",{staticClass:"ml20",staticStyle:{"padding-bottom":"40px"}},[t._v("\n                        暂无可用优惠券\n                    ")])]),t._v(" "),o("el-tab-pane",{attrs:{label:"不可用优惠券("+t.coupon.unusable.length+")"}},[t.coupon.unusable.length?o("div",{staticClass:"coupons-con"},[o("coupons-list",{attrs:{list:t.coupon.unusable,"show-more":!0,type:2}})],1):o("div",{staticClass:"ml20",staticStyle:{"padding-bottom":"40px"}},[t._v("\n                        暂无不可用优惠券\n                    ")])])],1)],1):t._e(),t._v(" "),t.orderInfo.integral_switch?o("div",{staticClass:"integral"},[o("div",{staticClass:"title"},[t._v("\n                积分抵扣 "),o("i",{staticClass:"el-icon-question",on:{click:t.showTipsDialog}})]),t._v(" "),o("div",{staticClass:"row check-box"},[o("el-checkbox",{attrs:{disabled:t.orderInfo.user_integral<t.orderInfo.integral_limit},on:{change:t.changeIntegral},model:{value:t.useIntegral,callback:function(e){t.useIntegral=e},expression:"useIntegral"}},[t._v("积分抵扣")]),t._v(" "),o("div",{staticClass:"muted ml8"},[t._v("\n                    共"+t._s(t.orderInfo.user_integral)+"积分"+t._s(t.orderInfo.user_integral<t.orderInfo.integral_limit?"，满"+t.orderInfo.integral_limit+"可用":"")+"\n                ")])],1)]):t._e()]),t._v(" "),o("div",{staticClass:"order-footer row bg-white"},[o("div",[o("div",{staticClass:"money row mb8"},[o("div",{staticClass:"lighter"},[t._v("商品总价：")]),t._v(" "),o("div",[t._v("¥"+t._s(t.orderInfo.total_goods_price))])]),t._v(" "),o("div",{staticClass:"money row mb8"},[o("div",{staticClass:"lighter"},[t._v("运费：")]),t._v(" "),o("div",[t._v("¥"+t._s(t.orderInfo.shipping_price))])]),t._v(" "),t.orderInfo.discount_amount?o("div",{staticClass:"money row mb8"},[o("div",{staticClass:"lighter"},[t._v("优惠券：")]),t._v(" "),o("div",[t._v("-¥"+t._s(t.orderInfo.discount_amount))])]):t._e(),t._v(" "),t.orderInfo.integral_amount?o("div",{staticClass:"money row mb8"},[o("div",{staticClass:"lighter"},[t._v("积分抵扣：")]),t._v(" "),o("div",[t._v("-¥"+t._s(t.orderInfo.integral_amount))])]):t._e(),t._v(" "),o("div",{staticClass:"money row mt16"},[o("div",{staticClass:"lighter"},[t._v("实付金额：")]),t._v(" "),o("div",{staticClass:"primary",staticStyle:{"font-size":"20px"}},[t._v("\n                    ¥"+t._s(t.orderInfo.order_amount)+"\n                ")])]),t._v(" "),o("div",{staticClass:"row",staticStyle:{"justify-content":"flex-end"}},[o("div",{staticClass:"white bg-primary lg btn row-center",on:{click:t.submitOrder}},[t._v("\n                    提交订单\n                ")])])])]),t._v(" "),o("address-add",{attrs:{aid:t.editId},on:{success:function(e){return t.orderBuy("info")}},model:{value:t.showAddressAdd,callback:function(e){t.showAddressAdd=e},expression:"showAddressAdd"}}),t._v(" "),o("address-list",{on:{confirm:t.changeAddress},model:{value:t.showAddress,callback:function(e){t.showAddress=e},expression:"showAddress"}}),t._v(" "),o("selffetch-shop-list",{attrs:{list:t.selffetchShop},on:{load:t.getShopList,confirm:t.changeSelffetch},model:{value:t.showSelffetch,callback:function(e){t.showSelffetch=e},expression:"showSelffetch"}})],1)}),[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"goods-hd row lighter"},[o("div",{staticClass:"info row"},[t._v("商品信息")]),t._v(" "),o("div",{staticClass:"price row-center"},[t._v("单价")]),t._v(" "),o("div",{staticClass:"num row-center"},[t._v("数量")]),t._v(" "),o("div",{staticClass:"money row-center"},[t._v("合计")])])}],!1,null,"36cd27b0",null);e.default=component.exports;installComponents(component,{PriceFormate:o(419).default,CouponsList:o(456).default,AddressAdd:o(473).default,AddressList:o(523).default,SelffetchShopList:o(491).default})}}]);