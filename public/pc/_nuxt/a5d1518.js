(window.webpackJsonp=window.webpackJsonp||[]).push([[34,15,16],{415:function(e,t,r){"use strict";var n=r(13),o=r(2),c=r(121),d=r(24),l=r(14),m=r(53),f=r(258),h=r(84),v=r(257),y=r(5),_=r(70),x=r(85).f,w=r(45).f,C=r(23).f,S=r(416).trim,N="Number",I=o.Number,T=I.prototype,E=m(_(T))==N,O=function(e){if(h(e))throw TypeError("Cannot convert a Symbol value to a number");var t,r,n,o,c,d,l,code,m=v(e,"number");if("string"==typeof m&&m.length>2)if(43===(t=(m=S(m)).charCodeAt(0))||45===t){if(88===(r=m.charCodeAt(2))||120===r)return NaN}else if(48===t){switch(m.charCodeAt(1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+m}for(d=(c=m.slice(2)).length,l=0;l<d;l++)if((code=c.charCodeAt(l))<48||code>o)return NaN;return parseInt(c,n)}return+m};if(c(N,!I(" 0o1")||!I("0b1")||I("+0x1"))){for(var M,A=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof A&&(E?y((function(){T.valueOf.call(r)})):m(r)!=N)?f(new I(O(t)),r,A):O(t)},R=n?x(I):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),k=0;R.length>k;k++)l(I,M=R[k])&&!l(A,M)&&C(A,M,w(I,M));A.prototype=T,T.constructor=A,d(o,N,A)}},416:function(e,t,r){var n=r(28),o=r(11),c="["+r(417)+"]",d=RegExp("^"+c+c+"*"),l=RegExp(c+c+"*$"),m=function(e){return function(t){var r=o(n(t));return 1&e&&(r=r.replace(d,"")),2&e&&(r=r.replace(l,"")),r}};e.exports={start:m(1),end:m(2),trim:m(3)}},417:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},418:function(e,t,r){var content=r(421);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(16).default)("03051d40",content,!0,{sourceMap:!1})},419:function(e,t,r){"use strict";r.r(t);r(415),r(69),r(259);var n={data:function(){return{priceSlice:{}}},components:{},props:{firstSize:{type:Number,default:14},secondSize:{type:Number,default:14},color:{type:String},weight:{type:[String,Number],default:500},price:{type:[String,Number],default:""},showSubscript:{type:Boolean,default:!0},subscriptSize:{type:Number,default:14},lineThrough:{type:Boolean,default:!1}},created:function(){this.priceFormat()},watch:{price:function(e){this.priceFormat()}},methods:{priceFormat:function(){var e=this.price,t={};null!==e&&(e=parseFloat(e),e=String(e).split("."),t.first=e[0],t.second=e[1],this.priceSlice=t)}}},o=(r(420),r(8)),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{class:(e.lineThrough?"line-through":"")+"price-format",style:{color:e.color,"font-weight":e.weight}},[e.showSubscript?r("span",{style:{"font-size":e.subscriptSize+"px","margin-right":"1px"}},[e._v("¥")]):e._e(),e._v(" "),r("span",{style:{"font-size":e.firstSize+"px","margin-right":"1px"}},[e._v(e._s(e.priceSlice.first))]),e._v(" "),e.priceSlice.second?r("span",{style:{"font-size":e.secondSize+"px"}},[e._v("."+e._s(e.priceSlice.second))]):e._e()])}),[],!1,null,null,null);t.default=component.exports},420:function(e,t,r){"use strict";r(418)},421:function(e,t,r){var n=r(15)(!1);n.push([e.i,".price-format{display:flex;align-items:baseline}",""]),e.exports=n},427:function(e,t,r){"use strict";r.d(t,"d",(function(){return n})),r.d(t,"e",(function(){return o})),r.d(t,"c",(function(){return c})),r.d(t,"b",(function(){return d})),r.d(t,"a",(function(){return l}));var n=5,o={SMS:0,ACCOUNT:1},c={REGISTER:"ZCYZ",FINDPWD:"ZHMM",LOGIN:"YZMDL",CHANGE_MOBILE:"BGSJHM",BIND:"BDSJHM"},d={NONE:"",SEX:"sex",NICKNAME:"nickname",AVATAR:"avatar",MOBILE:"mobile"},l={NORMAL:"normal",HANDLING:"apply",FINISH:"finish"}},428:function(e,t,r){"use strict";r.r(t);r(415),r(71),r(54),r(19),r(87),r(69),r(86);var n=6e4,o=36e5,c=24*o;function d(e){return(0+e.toString()).slice(-2)}var l={components:{},props:{isSlot:{type:Boolean,default:!1},time:{type:Number,default:0},format:{type:String,default:"hh:mm:ss"},autoStart:{type:Boolean,default:!0}},watch:{time:{immediate:!0,handler:function(e){e&&this.reset()}}},data:function(){return{timeObj:{},formateTime:0}},created:function(){},computed:{},methods:{createTimer:function(e){return setTimeout(e,100)},isSameSecond:function(e,t){return Math.floor(e)===Math.floor(t)},start:function(){this.counting||(this.counting=!0,this.endTime=Date.now()+1e3*this.remain,this.setTimer())},setTimer:function(){var e=this;this.tid=this.createTimer((function(){var t=e.getRemain();e.isSameSecond(t,e.remain)&&0!==t||e.setRemain(t),0!==e.remain&&e.setTimer()}))},getRemain:function(){return Math.max(this.endTime-Date.now(),0)},pause:function(){this.counting=!1,clearTimeout(this.tid)},reset:function(){this.pause(),this.remain=this.time,this.setRemain(this.remain),this.autoStart&&this.start()},setRemain:function(e){var t=this.format;this.remain=e;var time,r=(time=e,{days:Math.floor(time/c),hours:d(Math.floor(time%c/o)),minutes:d(Math.floor(time%o/n)),seconds:d(Math.floor(time%n/1e3))});this.formateTime=function(e,t){var r=t.days,n=t.hours,o=t.minutes,c=t.seconds;return-1!==e.indexOf("dd")&&(e=e.replace("dd",r)),-1!==e.indexOf("hh")&&(e=e.replace("hh",d(n))),-1!==e.indexOf("mm")&&(e=e.replace("mm",d(o))),-1!==e.indexOf("ss")&&(e=e.replace("ss",d(c))),e}(t,r),this.$emit("change",r),0===e&&(this.pause(),this.$emit("finish"))}}},m=r(8),component=Object(m.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.time>=0?r("div",[r("client-only",[e.isSlot?e._t("default"):r("span",[e._v(e._s(e.formateTime))])],2)],1):e._e()}),[],!1,null,null,null);t.default=component.exports},482:function(e,t,r){e.exports=r.p+"img/pay_success.3a82887.png"},498:function(e,t,r){var content=r(544);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(16).default)("3a1d5cf6",content,!0,{sourceMap:!1})},542:function(e,t,r){e.exports=r.p+"img/pay_wait.2214e17.png"},543:function(e,t,r){"use strict";r(498)},544:function(e,t,r){var n=r(15)(!1);n.push([e.i,".payment[data-v-e4887d24]{margin:16px 0;padding:0 40px}.payment .payment-hd>img[data-v-e4887d24]{width:32px;height:32px}.payment .payment-hd .status[data-v-e4887d24]{font-size:24px}.payment .payment-con[data-v-e4887d24],.payment .payment-hd[data-v-e4887d24]{padding:32px 0;border-bottom:1px dashed #e5e5e5}.payment .payment-con .item[data-v-e4887d24]{align-items:flex-start}.payment .payment-footer[data-v-e4887d24]{padding:32px 0}.payment .payment-footer .pay-way[data-v-e4887d24]{width:200px;height:68px;cursor:pointer;margin-right:32px;border:1px dashed #e5e5e5}.payment .payment-footer .pay-way img[data-v-e4887d24]{width:30px;height:30px}.payment .payment-footer .btn[data-v-e4887d24]{width:134px;height:40px;border:1px solid #e5e5e5}.payment .el-dialog .pay-code[data-v-e4887d24]{width:270px;height:270px}.payment .el-dialog .pay-money[data-v-e4887d24]{font-size:18px;margin-top:24px;align-items:baseline}",""]),e.exports=n},618:function(e,t,r){"use strict";r.r(t);var n=r(6),o=(r(71),r(48),r(428)),c=r(427),d={head:function(){return{title:this.$store.getters.headTitle,link:[{rel:"icon",type:"image/x-icon",href:this.$store.getters.favicon}]}},components:{CountDown:o.default},asyncData:function(e){return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,o,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.query,n=e.$get,t.next=3,n("order/detail",{params:{id:r.id}});case 3:return o=t.sent,data=o.data,t.abrupt("return",{order:data});case 6:case"end":return t.stop()}}),t)})))()},data:function(){return{showWxpay:!1,showAlipay:!1,payWayArr:[],payInfo:{},cancelTime:0,alipayHtml:""}},created:function(){this.id=this.$route.query.id,this.getPayway()},beforeDestroy:function(){clearInterval(this.timer)},methods:{getPayway:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,code,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$get("payment/payway",{params:{from:"order",order_id:e.id}});case 2:r=t.sent,code=r.code,data=r.data,1==code&&(e.payWayArr=data.pay,e.payWayArr.length||e.$message({message:"请联系管理员配置支付方式",type:"error"}));case 6:case"end":return t.stop()}}),t)})))()},orderPay:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,data,code,o,d,div;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$post("payment/pcPrepay",{order_id:t.id,pay_way:e,order_source:c.d});case 2:n=r.sent,data=n.data,code=n.code,o=n.msg,1==code?(t.payInfo=data,t.showWxpay=!0,t.createTimer()):20001==code?((d=document.getElementsByTagName("divform")).length&&document.body.removeChild(d[0]),(div=document.createElement("divform")).innerHTML=data.data,document.body.appendChild(div),document.forms[0].submit()):10001==code&&(t.$message({message:o,type:"success"}),t.getOrder());case 7:case"end":return r.stop()}}),r)})))()},clearTimer:function(){clearInterval(this.timer)},createTimer:function(){var e=this;this.timer&&clearInterval(this.timer),this.timer=setInterval((function(){e.getOrder()}),2e3)},getOrder:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,data,code;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$get("order/detail",{params:{id:e.id}});case 2:r=t.sent,data=r.data,code=r.code,r.msg,1==code&&(e.order=data,1==data.pay_status&&(clearInterval(e.timer),e.showWxpay=!1));case 7:case"end":return t.stop()}}),t)})))()}},computed:{getOrderStatus:function(){return function(e){var text="";switch(e){case 0:text="待支付";break;case 1:text="待发货";break;case 2:text="待收货";break;case 3:text="已完成";break;case 4:text="订单已关闭"}return text}},getCancelTime:function(){return function(time){return time-Date.now()/1e3}}}},l=(r(543),r(8)),component=Object(l.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"payment bg-white"},[n("div",{staticClass:"payment-hd row"},[0==e.order.pay_status?[n("img",{attrs:{src:r(542),alt:""}}),e._v(" "),n("div",{staticClass:"status ml8 mr16 bold"},[e._v("\n        "+e._s(e.getOrderStatus(e.order.order_status))+"\n      ")]),e._v(" "),e.getCancelTime(e.order.order_cancel_time)>0?n("div",{staticClass:"row"},[e._v("\n        请在\n        "),n("count-down",{style:{color:"#FF2C3C"},attrs:{time:e.getCancelTime(e.order.order_cancel_time),format:"hh时mm分ss秒"},on:{finish:e.getOrder}}),e._v("\n        完成支付, 超时后将取消订单\n      ")],1):e._e()]:e._e(),e._v(" "),1==e.order.pay_status?[n("img",{attrs:{src:r(482),alt:""}}),e._v(" "),n("div",{staticClass:"status ml8 mr16 bold"},[e._v("支付成功")])]:e._e()],2),e._v(" "),n("div",{staticClass:"payment-con"},[n("div",{staticClass:"item row mb16"},[e._v("订单编号："+e._s(e.order.order_sn))]),e._v(" "),n("div",{staticClass:"item row mb16"},[e._v("\n      订单价格："),n("span",{staticClass:"primary"},[e._v("￥"+e._s(e.order.order_amount))])]),e._v(" "),n("div",{staticClass:"item row mb16"},[e._v("\n      收货地址：\n      "),n("div",[e._v("\n        "+e._s(e.order.consignee)+" "+e._s(e.order.mobile)+"\n        "),n("span",{staticClass:"ml16"},[e._v(e._s(e.order.delivery_address))])])]),e._v(" "),n("div",{staticClass:"item row mb16"},[e._v("\n      商品名称：\n      "),n("div",e._l(e.order.order_goods,(function(t,r){return n("div",{key:r},[n("div",{staticClass:"row"},[e._v("\n            "+e._s(t.goods_name)+" /\n            "),n("span",{staticClass:"ml8"},[e._v(" "+e._s(t.spec_value))])])])})),0)])]),e._v(" "),n("div",{staticClass:"payment-footer"},[0==e.order.pay_status&&0==e.order.order_status?[n("div",{staticClass:"title lg bold"},[e._v("请选择支付方式")]),e._v(" "),n("div",{staticClass:"row mt16"},e._l(e.payWayArr,(function(t,r){return n("div",{key:r,staticClass:"pay-way  row-center",on:{click:function(r){return e.orderPay(t.pay_way)}}},[n("img",{attrs:{src:t.icon,alt:""}}),e._v(" "),n("span",{staticClass:"ml16 xxl"},[e._v(e._s(t.name))])])})),0)]:n("nuxt-link",{staticClass:"btn row-center",attrs:{to:"/user/order"}},[e._v("查看订单")])],2),e._v(" "),n("el-dialog",{attrs:{title:"微信支付",visible:e.showWxpay,width:"700px",center:""},on:{"update:visible":function(t){e.showWxpay=t},close:e.clearTimer}},[n("div",{staticClass:"column-center black"},[n("img",{staticClass:"pay-code",attrs:{src:e.payInfo.data,alt:""}}),e._v(" "),n("div",{staticClass:"mt8",staticStyle:{"font-size":"18px"}},[e._v("微信扫一扫，完成支付")]),e._v(" "),n("div",{staticClass:"pay-money row"},[n("span",[e._v("需支付金额：")]),e._v(" "),n("span",{staticClass:"primary"},[n("price-formate",{attrs:{price:e.payInfo.order_amount,"subscript-size":18,"first-size":28,"second-size":28}})],1)])])])],1)}),[],!1,null,"e4887d24",null);t.default=component.exports;installComponents(component,{PriceFormate:r(419).default})}}]);